<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>WAPH-Sai Murali Maitreya Javvadi</title>
	<link rel="stylesheet" href=https://waph-uc.github.io/style1.css>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
	<div class="container wrapper">
	<div id="top">
		<h1>Web Application Programming and Hacking</h1>
		<h2>Front end web development lab</h2>
		<h3>Instructor: Dr. Phu Phung</h3>
	</div>
	<div class="wrapper">
	<div id="menubar">
		<h3>Student: Sai Murali Maitreya Javvadi</h3>
		<div id="email" onclick="showHideEmail()">Show my Email</div>
		<script src="email.js"></script>
		<img src="Headshot_Javvadi%20Sai%20Murali%20Maitreya.jpg" alt="My headshot" width="50">
		<div id="digital-clock"></div>
		<canvas id="analog-clock" width="150" height="150" style="background-color: #999"></canvas>
		<script src="https://waph-uc.github.io/clock.js"></script>
		<script>
			function displayTime(){
				document.getElementById('digital-clock').innerHTML= "Current time: " + new Date();
			}
			setInterval(displayTime, 500);

			//code for analog clock

			var canvas = document.getElementById("analog-clock");
			var ctx = canvas.getContext("2d");
			var radius = canvas.height/2;
			ctx.translate(radius, radius);
			radius = radius*0.90;
			setInterval(drawClock, 1000);

			function drawClock() {
				drawFace(ctx, radius);
				drawNumbers(ctx, radius);
				drawTime(ctx, radius);
			}
		</script>
	</div>
	<div id="main">
		<p>A simple HTML page</p>
		Using the <a href="https://www.w3schools.com/html" target="_blank"> W3Schools Template </a>
		<hr>
		<b> Interaction with forms </b>
		<div>
		<i>Form with an HTTP GET Request</i>
		<form action="/echo.php" method="GET" onsubmit="return validateForm(this);">
			Your input: <input name="data" oninput="encodeInput(this)">
			<input type="submit" name="submit">
		</form>
		</div>
		<div>
		<i>Form with an HTTP POST Request</i>
		<form action="/echo.php" method="POST" onsubmit="return validateForm(this);">
			Your input: <input name="data" oninput="encodeInput(this)" onkeypress="console.log('You have pressed a key')">
			<input type="submit" name="submit">
		</form>
		<script>
			function validateForm(form) {
        		const inputData = form.elements['data'].value;
        		if (validateInput(inputData)) {
            		encodeInput(form.elements['data']);
            		return true;
        		} else {
            		alert("Please enter a valid input.");
            	return false;
        		}
   			}
		</script>
		</div>
		<hr>
		<b> Experiments with Javascript code </b><br>
		<i>Inlined Javascript</i>
		<div id="date" onclick="document.getElementById('date').innerHTML=Date()"> Click here to show Date()</div>
		<div>
			<i> Ajax Requests </i><br>
			Your Input: <input name="data" id="data"  oninput="encodeInput(this)">
			<input class="button round" type="button" value="Ajax Echo" onclick="getEcho()">
			<input class="button round" type="button" value="JQuery Ajax GET Echo" onclick="jQueryAjaxGET()">
			<input class="button round" type="button" value="JQuery Ajax POST Echo" onclick="jQueryAjaxPOST()">
			<input class="button round" type="button" value="Guess Age" onclick="guessAge($('#data').val())">
			<div id="response"></div>
			<script>
				function getEcho() {
					var input = document.getElementById('data').value;
					if(input.length == 0) {
						return;
					}
					var xhttp = new XMLHttpRequest();
					xhttp.onreadystatechange = function() {
						if(this.readyState == 4 && this.status == 200) {
							console.log("Recieved Data: " + xhttp.responseText);
							document.getElementById("response").innerText = "Response from server: " + xhttp.responseText;
							//code to display response
						}
					}
					//code to create Ajax request
					xhttp.open("GET", "echo.php?data=" + input, true);
					xhttp.send(); // code to send the request
					document.getElementById('data').value="";	
				}
				//Code to create Ajax GET request using jquery syntax
				function jQueryAjaxGET() {
					var input = $('#data').val();
					if(input.length == 0) return;
					$.get("echo.php?data=" + input,
							function(result) {
								$("#response").html("Response from server:" + result);
							});
					$("#data").val("");
				}

				//Code to create Ajax POST request using jquery syntax
				function jQueryAjaxPOST() {
					var input = $('#data').val();
					if(input.length == 0) return;
        
        			// Create an object to hold the data to be sent
        			var postData = {
            			data: input
        			};
        
        			$.ajax({
            			url: "echo.php",
            			type: "POST",
            			data: postData,
            			success: function(result) {
                			$("#response").html("Response from server:" + result);
            			}
        			});
        
					$("#data").val("");
				}

				// code to send a get request to a third party web api
				$.get("https://v2.jokeapi.dev/joke/Programming?type=single", 
					function(result) {
						var encodedJoke = encodeInput(result.joke);
						console.log("Response from JokeAPI:" + JSON.stringify(result));
						$("#response").html("Programming joke of the day:" + encodedJoke);
					})

				// Code to call a third party api using fetch() and display the response
				async function guessAge(name) {
					if (validateInput(name)) {
            			const encodedName = encodeInput(name);
						const response = await fetch("https://api.agify.io/?name=" + encodedName);
						const result = await response.json();
						const encodedAge = encodeInput(result.age.toString());
            			$("#response").html("Hi " + encodedName + ", your age should be " + encodedAge);
        			} else {
            			$("#response").html("Please enter a valid name.");
        			}	
				}


    			function validateInput(input) {
        			if(input.length == 0){
        				alert("Please enter some text");
        				return false;
        			}
        			return true;
    			}

    			function encodeInput(input) {
            		const encoded = document.createElement('div');
            		encoded.innerText = input.value;
            		input.value = encoded.innerHTML;
        		}

			</script>
		</div>
	</div>
</body>
</html>
